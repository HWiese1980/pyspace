<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ll_backend &mdash; pySPACE documentation</title>
    
    <link rel="stylesheet" href="../../_static/pySPACE.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.3 release',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/pyspace-logo.ico"/>
    <link rel="top" title="pySPACE documentation" href="../../index.html" />
    <link rel="up" title="backends Package" href="pySPACE.environments.backends.html" />
    <link rel="next" title="ll_runner" href="pySPACE.environments.backends.ll_runner.html" />
    <link rel="prev" title="base" href="pySPACE.environments.backends.base.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pySPACE.environments.backends.ll_runner.html" title="ll_runner"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pySPACE.environments.backends.base.html" title="base"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">pySPACE documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../content.html" >Table of Contents</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="pySPACE.html" >pySPACE Package</a> &raquo;</li>
          <li class="nav-item nav-item-3"><a href="pySPACE.environments.html" >environments Package</a> &raquo;</li>
          <li class="nav-item nav-item-4"><a href="pySPACE.environments.backends.html" accesskey="U">backends Package</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/pyspace-logo_small.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">ll_backend</a><ul>
<li><a class="reference internal" href="#module-pySPACE.environments.backends.ll_backend">Module: <code class="docutils literal"><span class="pre">environments.backends.ll_backend</span></code></a></li>
<li><a class="reference internal" href="#class-summary">Class Summary</a></li>
<li><a class="reference internal" href="#classes">Classes</a><ul>
<li><a class="reference internal" href="#loadlevelerbackend"><code class="docutils literal"><span class="pre">LoadLevelerBackend</span></code></a></li>
<li><a class="reference internal" href="#loadlevelercomhandler"><code class="docutils literal"><span class="pre">LoadLevelerComHandler</span></code></a></li>
<li><a class="reference internal" href="#subflowstarter"><code class="docutils literal"><span class="pre">SubflowStarter</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="pySPACE.environments.backends.base.html"
                        title="previous chapter">base</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pySPACE.environments.backends.ll_runner.html"
                        title="next chapter">ll_runner</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/api/generated/pySPACE.environments.backends.ll_backend.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="ll-backend">
<h1>ll_backend<a class="headerlink" href="#ll-backend" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-pySPACE.environments.backends.ll_backend">
<span id="module-environments-backends-ll-backend"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">environments.backends.ll_backend</span></code><a class="headerlink" href="#module-pySPACE.environments.backends.ll_backend" title="Permalink to this headline">¶</a></h2>
<p>Execute operations on a cluster with the LoadLeveler scheduler</p>
<p>Inheritance diagram for <code class="docutils literal"><span class="pre">pySPACE.environments.backends.ll_backend</span></code>:</p>
<img src="../../_images/inheritance-25c191070cdcbd46dabe630e436763b9c59c0e6d.png" alt="Inheritance diagram of pySPACE.environments.backends.ll_backend" usemap="#inheritancee0fe0d248b" class="inheritance"/>
<map id="inheritancee0fe0d248b" name="inheritancee0fe0d248b">
<area shape="rect" id="node1" href="pySPACE.environments.backends.base.html#pySPACE.environments.backends.base.Backend" target="_top" title="Interface for backends" alt="" coords="55,0,200,15"/>
<area shape="rect" id="node2" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend" target="_top" title="Commits every process to LoadLeveler cluster, which resumes parallel execution" alt="" coords="0,63,255,77"/>
<area shape="rect" id="node3" href="#pySPACE.environments.backends.ll_backend.LoadLevelerComHandler" target="_top" title="Server socket thread for accepting connections and reacting on it" alt="" coords="307,63,585,77"/>
<area shape="rect" id="node4" title="A class that represents a thread of control." alt="" coords="523,0,625,15"/>
<area shape="rect" id="node5" href="#pySPACE.environments.backends.ll_backend.SubflowStarter" target="_top" title="Submit subflows to LoadLeveler" alt="" coords="594,63,810,77"/>
</map>
</div>
<div class="section" id="class-summary">
<h2>Class Summary<a class="headerlink" href="#class-summary" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend" title="pySPACE.environments.backends.ll_backend.LoadLevelerBackend"><code class="xref py py-obj docutils literal"><span class="pre">LoadLevelerBackend</span></code></a>()</td>
<td>Commits every process to LoadLeveler cluster, which resumes parallel execution</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerComHandler" title="pySPACE.environments.backends.ll_backend.LoadLevelerComHandler"><code class="xref py py-obj docutils literal"><span class="pre">LoadLevelerComHandler</span></code></a>(sock,&nbsp;executing_queue,&nbsp;...)</td>
<td>Server socket thread for accepting connections and reacting on it</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pySPACE.environments.backends.ll_backend.SubflowStarter" title="pySPACE.environments.backends.ll_backend.SubflowStarter"><code class="xref py py-obj docutils literal"><span class="pre">SubflowStarter</span></code></a>(task_queue,&nbsp;sock,&nbsp;loadl_temp)</td>
<td>Submit subflows to LoadLeveler</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="loadlevelerbackend">
<h3><a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend" title="pySPACE.environments.backends.ll_backend.LoadLevelerBackend"><code class="xref py py-class docutils literal"><span class="pre">LoadLevelerBackend</span></code></a><a class="headerlink" href="#loadlevelerbackend" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pySPACE.environments.backends.ll_backend.LoadLevelerBackend">
<em class="property">class </em><code class="descclassname">pySPACE.environments.backends.ll_backend.</code><code class="descname">LoadLevelerBackend</code><a class="reference internal" href="../../_modules/pySPACE/environments/backends/ll_backend.html#LoadLevelerBackend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="pySPACE.environments.backends.base.html#pySPACE.environments.backends.base.Backend" title="pySPACE.environments.backends.base.Backend"><code class="xref py py-class docutils literal"><span class="pre">pySPACE.environments.backends.base.Backend</span></code></a></p>
<p>Commits every process to LoadLeveler cluster, which resumes parallel execution</p>
<p>Each process corresponds to one combination of input data set and
parameter choice. The process objects are first pickled.
The path to the pickled object together with a helper script is then
submitted to LoadLeveler. There the object is unpickled, called and 
the backend is informed when the results are stored.</p>
<p>Communication between the independent processes and the backend is
done via TCP socket connection (see 
<a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerComHandler" title="pySPACE.environments.backends.ll_backend.LoadLevelerComHandler"><code class="xref py py-class docutils literal"><span class="pre">LoadLevelerComHandler</span></code></a> for detailed 
information).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Anett Seeland (<a class="reference external" href="mailto:anett&#46;seeland&#37;&#52;&#48;dfki&#46;de">anett<span>&#46;</span>seeland<span>&#64;</span>dfki<span>&#46;</span>de</a>)</td>
</tr>
<tr class="field-even field"><th class="field-name">Created:</th><td class="field-body">2011/06/08</td>
</tr>
<tr class="field-odd field"><th class="field-name">LastChange:</th><td class="field-body">2012/09/06 Add communication to SubflowHandler</td>
</tr>
</tbody>
</table>
<p><strong>Class Components Summary</strong></p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend.check_status" title="pySPACE.environments.backends.ll_backend.LoadLevelerBackend.check_status"><code class="xref py py-obj docutils literal"><span class="pre">check_status</span></code></a>()</td>
<td>Return a description of the current state of the operations execution</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend.cleanup" title="pySPACE.environments.backends.ll_backend.LoadLevelerBackend.cleanup"><code class="xref py py-obj docutils literal"><span class="pre">cleanup</span></code></a>()</td>
<td>Remove the current operation and all potential results that have been stored in this object</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend.consolidate" title="pySPACE.environments.backends.ll_backend.LoadLevelerBackend.consolidate"><code class="xref py py-obj docutils literal"><span class="pre">consolidate</span></code></a>()</td>
<td>Consolidate the single processes&#8217; results into a consistent result of the whole operation</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend.execute" title="pySPACE.environments.backends.ll_backend.LoadLevelerBackend.execute"><code class="xref py py-obj docutils literal"><span class="pre">execute</span></code></a>()</td>
<td>Execute all processes specified in the currently staged operation</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend.retrieve" title="pySPACE.environments.backends.ll_backend.LoadLevelerBackend.retrieve"><code class="xref py py-obj docutils literal"><span class="pre">retrieve</span></code></a>()</td>
<td>Wait for all results of the operation</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend.stage_in" title="pySPACE.environments.backends.ll_backend.LoadLevelerBackend.stage_in"><code class="xref py py-obj docutils literal"><span class="pre">stage_in</span></code></a>(operation)</td>
<td>Stage the current operation</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pySPACE.environments.backends.ll_backend.LoadLevelerBackend.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pySPACE/environments/backends/ll_backend.html#LoadLevelerBackend.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pySPACE.environments.backends.ll_backend.LoadLevelerBackend.stage_in">
<code class="descname">stage_in</code><span class="sig-paren">(</span><em>operation</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pySPACE/environments/backends/ll_backend.html#LoadLevelerBackend.stage_in"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend.stage_in" title="Permalink to this definition">¶</a></dt>
<dd><p>Stage the current operation</p>
</dd></dl>

<dl class="method">
<dt id="pySPACE.environments.backends.ll_backend.LoadLevelerBackend.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pySPACE/environments/backends/ll_backend.html#LoadLevelerBackend.execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute all processes specified in the currently staged operation</p>
</dd></dl>

<dl class="method">
<dt id="pySPACE.environments.backends.ll_backend.LoadLevelerBackend.check_status">
<code class="descname">check_status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pySPACE/environments/backends/ll_backend.html#LoadLevelerBackend.check_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend.check_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a description of the current state of the operations execution</p>
</dd></dl>

<dl class="method">
<dt id="pySPACE.environments.backends.ll_backend.LoadLevelerBackend.retrieve">
<code class="descname">retrieve</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pySPACE/environments/backends/ll_backend.html#LoadLevelerBackend.retrieve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend.retrieve" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for all results of the operation</p>
<p>This call blocks until all processes are finished.</p>
</dd></dl>

<dl class="method">
<dt id="pySPACE.environments.backends.ll_backend.LoadLevelerBackend.consolidate">
<code class="descname">consolidate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pySPACE/environments/backends/ll_backend.html#LoadLevelerBackend.consolidate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend.consolidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Consolidate the single processes&#8217; results into a consistent result of the whole operation</p>
</dd></dl>

<dl class="method">
<dt id="pySPACE.environments.backends.ll_backend.LoadLevelerBackend.cleanup">
<code class="descname">cleanup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pySPACE/environments/backends/ll_backend.html#LoadLevelerBackend.cleanup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the current operation and all potential results that have been stored in this object</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="loadlevelercomhandler">
<h3><a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerComHandler" title="pySPACE.environments.backends.ll_backend.LoadLevelerComHandler"><code class="xref py py-class docutils literal"><span class="pre">LoadLevelerComHandler</span></code></a><a class="headerlink" href="#loadlevelercomhandler" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pySPACE.environments.backends.ll_backend.LoadLevelerComHandler">
<em class="property">class </em><code class="descclassname">pySPACE.environments.backends.ll_backend.</code><code class="descname">LoadLevelerComHandler</code><span class="sig-paren">(</span><em>sock</em>, <em>executing_queue</em>, <em>progress_bar</em>, <em>loadl_temp</em>, <em>operation_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pySPACE/environments/backends/ll_backend.html#LoadLevelerComHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySPACE.environments.backends.ll_backend.LoadLevelerComHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">threading.Thread</span></code></p>
<p>Server socket thread for accepting connections and reacting on it</p>
<p>A helper class for 
<a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend" title="pySPACE.environments.backends.ll_backend.LoadLevelerBackend"><code class="xref py py-class docutils literal"><span class="pre">LoadLevelerBackend</span></code></a>, 
which releases finished processes from the execution queue making new 
submits to LoadLeveler possible. In addition the Backends progress bar is 
updated.</p>
<p>It is also possible to communicate with this thread via the
<a class="reference internal" href="pySPACE.environments.chains.node_chain.html#pySPACE.environments.chains.node_chain.SubflowHandler" title="pySPACE.environments.chains.node_chain.SubflowHandler"><code class="xref py py-class docutils literal"><span class="pre">SubflowHandler</span></code></a>
or via terminal (port and ip can be checked in &#8216;ll_call.cmd&#8217;).
The benefit of communication is to find out, which processes are running
and to find out the details on the current state of the processing.</p>
<p><strong>Parameters</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">sock:</th><td class="field-body">The server socket which listens to messages</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">executing_queue:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">A queue where one element has to be removed if &#8216;finished&#8217; is sent.</td>
</tr>
<tr class="field-odd field"><th class="field-name">progress_bar:</th><td class="field-body">A progress bar object with is updated, if &#8216;finished&#8217; is sent.</td>
</tr>
<tr class="field-even field"><th class="field-name">loadl_temp:</th><td class="field-body">A template for a cmd-file that is used to submit subflow-jobs.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Anett Seeland (<a class="reference external" href="mailto:anett&#46;seeland&#37;&#52;&#48;dfki&#46;de">anett<span>&#46;</span>seeland<span>&#64;</span>dfki<span>&#46;</span>de</a>)</td>
</tr>
<tr class="field-even field"><th class="field-name">Created:</th><td class="field-body">2011/06/08</td>
</tr>
<tr class="field-odd field"><th class="field-name">LastChange:</th><td class="field-body">2012/09/06 added communication with SubflowHandler</td>
</tr>
</tbody>
</table>
<p><strong>Class Components Summary</strong></p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerComHandler.close_sock" title="pySPACE.environments.backends.ll_backend.LoadLevelerComHandler.close_sock"><code class="xref py py-obj docutils literal"><span class="pre">close_sock</span></code></a>(conn)</td>
<td>Close connection and remove it from lists of potentially readers/writers</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerComHandler.control_subflow_submission" title="pySPACE.environments.backends.ll_backend.LoadLevelerComHandler.control_subflow_submission"><code class="xref py py-obj docutils literal"><span class="pre">control_subflow_submission</span></code></a>(path,&nbsp;runs,&nbsp;...)</td>
<td>Give SubflowStarter only a limited amount of tasks</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerComHandler.parse_message" title="pySPACE.environments.backends.ll_backend.LoadLevelerComHandler.parse_message"><code class="xref py py-obj docutils literal"><span class="pre">parse_message</span></code></a>(conn)</td>
<td>Parse incoming message and react</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerComHandler.run" title="pySPACE.environments.backends.ll_backend.LoadLevelerComHandler.run"><code class="xref py py-obj docutils literal"><span class="pre">run</span></code></a>()</td>
<td>Accept, read and write on connections until all processes are finished</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pySPACE.environments.backends.ll_backend.LoadLevelerComHandler.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>sock</em>, <em>executing_queue</em>, <em>progress_bar</em>, <em>loadl_temp</em>, <em>operation_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pySPACE/environments/backends/ll_backend.html#LoadLevelerComHandler.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySPACE.environments.backends.ll_backend.LoadLevelerComHandler.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pySPACE.environments.backends.ll_backend.LoadLevelerComHandler.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pySPACE/environments/backends/ll_backend.html#LoadLevelerComHandler.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySPACE.environments.backends.ll_backend.LoadLevelerComHandler.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Accept, read and write on connections until all processes are finished</p>
</dd></dl>

<dl class="method">
<dt id="pySPACE.environments.backends.ll_backend.LoadLevelerComHandler.close_sock">
<code class="descname">close_sock</code><span class="sig-paren">(</span><em>conn</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pySPACE/environments/backends/ll_backend.html#LoadLevelerComHandler.close_sock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySPACE.environments.backends.ll_backend.LoadLevelerComHandler.close_sock" title="Permalink to this definition">¶</a></dt>
<dd><p>Close connection and remove it from lists of potentially readers/writers</p>
</dd></dl>

<dl class="method">
<dt id="pySPACE.environments.backends.ll_backend.LoadLevelerComHandler.parse_message">
<code class="descname">parse_message</code><span class="sig-paren">(</span><em>conn</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pySPACE/environments/backends/ll_backend.html#LoadLevelerComHandler.parse_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySPACE.environments.backends.ll_backend.LoadLevelerComHandler.parse_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse incoming message and react</p>
<p>The following string messages can be send:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">name:</th><td class="field-body">Send name of the Backend back, e.g. &#8216;loadl&#8217; or &#8216;local&#8217;.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">subflow_batchsize;*batchsize*:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><em>batch_size</em> determines how many subflows are executed in one
serial LoadLeveler job.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">submitted;*process_nr*;*loadl_id*:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Informs the listener that the pickled process
<cite>process_*process_nr*.pickle</cite> has been submitted to LoadLeveler.
In addition the LoadLeveler job id (without step id) is stored
to be available for debugging purposes.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">creation finished:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Informs the listener that no further process will be created
anymore. Based on that the listener has only to process further
messages until the number of running processes equals zero.</td>
</tr>
<tr class="field-odd field"><th class="field-name">finished:</th><td class="field-body">Informs the listener that a process has been successfully
executed. Hence, the number of running processes is
decremented (the Backend is able to submit a new job) and the
progress bar is updated.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">finished <em>flow_id</em>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Informs the listener that a subflow with unique identifier 
<em>flow_id</em> has stored its results.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">is_ready;*nr_subflows*;*subflow_ids*:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Asks the listener which of the <em>nr_subflows</em> subflows 
(identified by their subflow_id) have already finished executing. 
<em>subflow_ids</em> must be a string representation of a set. The
listener sends the set of finished ids back.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">execute_subflows;*path*;*nr_subflows*;*subflow_ids*;*runs*:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Asks the listener to execute <em>nr_subflows</em> subflows.
<em>path</em> is the absolute path where the subflows (named by their
unique subflow id) are stored on disk, e.g. the <em>temp_dir</em> of 
a node. Hence, <em>subflow_ids</em> is a list of the filenames in 
<em>path</em> (without file extension) that have been stored before in
pickle-format. <em>runs</em> is a list containing the run numbers the
flow should be executed with: the <em>run_number</em> determines the
random seed, e.g., for a splitter node. In addition it is 
assumed, that the data the subflows need for execution is also 
present in <em>path</em> (as &#8216;subflow_data.pickle&#8217;). 
Since the reaction of this request may take quite some time, it
is swapped to another 
<a class="reference internal" href="#pySPACE.environments.backends.ll_backend.SubflowStarter" title="pySPACE.environments.backends.ll_backend.SubflowStarter"><code class="xref py py-class docutils literal"><span class="pre">Thread</span></code></a>.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">get_*attribute_name*:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Getter methods for debugging purposes. Sends the value of 
<em>attribute_name</em> back.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">set_*attribute_name*;*value*:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">Setter methods for debugging purposes. Equals to
&#8216;self.attribute_name = value&#8217;. Note that <em>value</em> must be 
evaluable.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is important that you don&#8217;t forget the end_flog at each
message, which is &#8216;!END!&#8217;.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="pySPACE.environments.backends.ll_backend.LoadLevelerComHandler.control_subflow_submission">
<code class="descname">control_subflow_submission</code><span class="sig-paren">(</span><em>path</em>, <em>runs</em>, <em>subflow_ids</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pySPACE/environments/backends/ll_backend.html#LoadLevelerComHandler.control_subflow_submission"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySPACE.environments.backends.ll_backend.LoadLevelerComHandler.control_subflow_submission" title="Permalink to this definition">¶</a></dt>
<dd><p>Give SubflowStarter only a limited amount of tasks</p>
<p>The MAX_RUNNING variable specifies how many loadleveler subflow jobs
should maximal run in parallel. With respect to this number the 
SubflowStarter gets only tasks if there are available slots.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="subflowstarter">
<h3><a class="reference internal" href="#pySPACE.environments.backends.ll_backend.SubflowStarter" title="pySPACE.environments.backends.ll_backend.SubflowStarter"><code class="xref py py-class docutils literal"><span class="pre">SubflowStarter</span></code></a><a class="headerlink" href="#subflowstarter" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="pySPACE.environments.backends.ll_backend.SubflowStarter">
<em class="property">class </em><code class="descclassname">pySPACE.environments.backends.ll_backend.</code><code class="descname">SubflowStarter</code><span class="sig-paren">(</span><em>task_queue</em>, <em>sock</em>, <em>loadl_temp</em>, <em>operation_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pySPACE/environments/backends/ll_backend.html#SubflowStarter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySPACE.environments.backends.ll_backend.SubflowStarter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">threading.Thread</span></code></p>
<p>Submit subflows to LoadLeveler</p>
<p>A helper class for 
<a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerComHandler" title="pySPACE.environments.backends.ll_backend.LoadLevelerComHandler"><code class="xref py py-class docutils literal"><span class="pre">LoadLevelerComHandler</span></code></a>,
which submits subflows as independent jobs to LoadLeveler. The reason behind
it is a better (more fair) scheduling of jobs when several users run the software on
a cluster due to the fact that each single job has a short computation time.</p>
<p>Since LoadLeveler does not know that Processes have nothing to do than
wait when their subflows have to be executed, another job class is used for
the subflow that preempt the Processes. The name of this class ends with
&#8216;_child&#8217;.</p>
<p><strong>Parameters</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">task_queue:</th><td class="field-body">This queue is filled with jobs from incoming requests by the
<a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerComHandler" title="pySPACE.environments.backends.ll_backend.LoadLevelerComHandler"><code class="xref py py-class docutils literal"><span class="pre">LoadLevelerComHandler</span></code></a>.
Each job is specified by a tuple: (<em>path</em>,*runs*,*subflow_ids*).</td>
</tr>
<tr class="field-even field"><th class="field-name">sock:</th><td class="field-body">The listener socket to be able to get information about it. Needed
to fill out the LoadLeveler command file.</td>
</tr>
<tr class="field-odd field"><th class="field-name">loadl_temp:</th><td class="field-body">LoadLeveler command file template that has been partly filled out 
by <a class="reference internal" href="#pySPACE.environments.backends.ll_backend.LoadLevelerBackend" title="pySPACE.environments.backends.ll_backend.LoadLevelerBackend"><code class="xref py py-class docutils literal"><span class="pre">LoadLevelerBackend</span></code></a>
but needs to be further adjusted.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>Class Components Summary</strong></p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#pySPACE.environments.backends.ll_backend.SubflowStarter.run" title="pySPACE.environments.backends.ll_backend.SubflowStarter.run"><code class="xref py py-obj docutils literal"><span class="pre">run</span></code></a>()</td>
<td>Portion and execute subflow tasks until <em>subflow_ids</em> equals &#8216;False&#8217;</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pySPACE.environments.backends.ll_backend.SubflowStarter.submit" title="pySPACE.environments.backends.ll_backend.SubflowStarter.submit"><code class="xref py py-obj docutils literal"><span class="pre">submit</span></code></a>(path,&nbsp;runs,&nbsp;subflow_ids)</td>
<td>Submit one subflow job to LoadLeveler</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pySPACE.environments.backends.ll_backend.SubflowStarter.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>task_queue</em>, <em>sock</em>, <em>loadl_temp</em>, <em>operation_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pySPACE/environments/backends/ll_backend.html#SubflowStarter.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySPACE.environments.backends.ll_backend.SubflowStarter.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pySPACE.environments.backends.ll_backend.SubflowStarter.submit">
<code class="descname">submit</code><span class="sig-paren">(</span><em>path</em>, <em>runs</em>, <em>subflow_ids</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pySPACE/environments/backends/ll_backend.html#SubflowStarter.submit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySPACE.environments.backends.ll_backend.SubflowStarter.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Submit one subflow job to LoadLeveler</p>
</dd></dl>

<dl class="method">
<dt id="pySPACE.environments.backends.ll_backend.SubflowStarter.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pySPACE/environments/backends/ll_backend.html#SubflowStarter.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pySPACE.environments.backends.ll_backend.SubflowStarter.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Portion and execute subflow tasks until <em>subflow_ids</em> equals &#8216;False&#8217;</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pySPACE.environments.backends.ll_runner.html" title="ll_runner"
             >next</a> |</li>
        <li class="right" >
          <a href="pySPACE.environments.backends.base.html" title="base"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">pySPACE documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../content.html" >Table of Contents</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="pySPACE.html" >pySPACE Package</a> &raquo;</li>
          <li class="nav-item nav-item-3"><a href="pySPACE.environments.html" >environments Package</a> &raquo;</li>
          <li class="nav-item nav-item-4"><a href="pySPACE.environments.backends.html" >backends Package</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, pySPACE Developer Team.
      Last updated on Sep 04, 2016.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.2.
    </div>
  </body>
</html>